<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/base.css">
    <link rel="stylesheet" href="./assets/css/main.css">
    <title>Bầu cử đại biểu quốc hội</title>
</head>
<body>
    <div class="header">
        <div class="grid">
            <div class="navbar">
                <div class="navbar__title">
                    BẦU CỬ ĐẠI BIỂU QUỐC HỘI
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="container__work">
            <p class="container__title">Danh sách ứng cử</p>
            <div class="container__items">
                <div class="container__item">
                    <input type="checkbox" class="container__checker" id="item_0">
                    <span class="container__name">1. Nguyễn Văn Hiếu</span>
                </div>
                <div class="container__item">
                    <input type="checkbox" class="container__checker" id="item_1">
                    <span class="container__name">2. Arất Thị Thúy Nga</span>
                </div>
                <div class="container__item">
                    <input type="checkbox" class="container__checker" id="item_2">
                    <span class="container__name">3. Vương Quốc Thắng</span>
                </div>
                <div class="container__item">
                    <input type="checkbox" class="container__checker" id="item_3">
                    <span class="container__name">4. Đặng Thị Bảo Trinh</span>
                </div>
            </div>
        </div>
        <div class="container__control">
            <button onclick="getValue()" class="btn">Nhập</button>
            <button onclick="decrease()" class="btn">Xóa</button>
            <!-- <button onclick="" class="btn">Lưu</button> -->
        </div>
        <div class="container__result" id="p1">
        </div>
    </div>

    <script>
        const ele = new Array(0,0,0,0)
        const a = new Array(0,0)
        var dem = 0
        function getValue() {
            var sum = 0;
            var counter = 0
            for (i = 0 ; i< ele.length ; i++) {
                if (document.getElementById(`item_${i}`).checked) {
                    sum += 1;
                }
            }
            if (sum >= 3 || sum == 0) {
                alert("Khong hop le");
                for (i = 0; i < ele.length; i++) {
                           check = document.getElementById(`item_${i}`);
                        check.checked = false;
                   }
            } else {
                dem += 1;
                for (i = 0 ; i< ele.length ; i++){
                    if (document.getElementById(`item_${i}`).checked) {
                        ele[i] += 1;
                        counter += 1;
                    }
                }
            }
            if (counter == 1) {a[0]+=1}
            if (counter == 2) {a[1]+=1}
            document.getElementById('p1').innerHTML = `
             <p class="container__result-title">Kết quả: ${dem} phiếu</p>
             <div class="container__sum">
                 <p class="container__sum-item">1. Nguyễn Văn Hiếu: ${ele[0]}</p>
                 <p class="container__sum-item">${((ele[0]/dem)*100).toFixed(2)}%</p>
             </div>
             <div class="container__sum">
                 <p class="container__sum-item">2. Arất Thị Thúy Nga: ${ele[1]} </p>
                 <p class="container__sum-item">${((ele[1]/dem)*100).toFixed(2)}%</p>
             </div>
             <div class="container__sum">
                 <p class="container__sum-item">3. Vương Quốc Thắng: ${ele[2]} </p>
                 <p class="container__sum-item">${((ele[2]/dem)*100).toFixed(2)}%</p>
             </div>
             <div class="container__sum">
                 <p class="container__sum-item">4. Đặng Thị Bảo Trinh: ${ele[3]} </p>
                 <p class="container__sum-item">${((ele[3]/dem)*100).toFixed(2)}%</p>
             </div>
             <div class="contaner__counter">
                <p class="container__counter-item">Bầu 1: ${a[0]}</p>
                <p class="container__counter-item">Bầu 2: ${a[1]}</p>
             </div>
             `
 
             for (i = 0; i < ele.length; i++) {
                        check = document.getElementById(`item_${i}`);
                     check.checked = false;
                }
        }

        function decrease() {
            var sum = 0;
            var counter = 0;
            for (i = 0 ; i< ele.length ; i++) {
                if (document.getElementById(`item_${i}`).checked) {
                    sum += 1;
                }
            }

            if (sum >= 3 || sum == 0 ) {
                alert("Khong hop le");
                for (i = 0; i < ele.length; i++) {
                           check = document.getElementById(`item_${i}`);
                        check.checked = false;
                   }
            } else {
                dem -= 1;
                if (dem < 0) {
                    alert("Khong hop le");
                    dem += 1;
                }
                else {
                    for (i = 0 ; i< ele.length ; i++){
                        if (document.getElementById(`item_${i}`).checked) {
                            ele[i] -= 1;
                            counter += 1;
                        }
                    }
                }
            }
            if (counter == 1) {a[0] -= 1}
            if (counter == 2) {a[1] -= 1}
            document.getElementById('p1').innerHTML = `
            <p class="container__result-title">Kết quả: ${dem} phiếu</p>
             <div class="container__sum">
                 <p class="container__sum-item">1. Nguyễn Văn Hiếu: ${ele[0]}</p>
                 <p class="container__sum-item">${((ele[0]/dem)*100).toFixed(2)}%</p>
             </div>
             <div class="container__sum">
                 <p class="container__sum-item">2. Arất Thị Thúy Nga: ${ele[1]} </p>
                 <p class="container__sum-item">${((ele[1]/dem)*100).toFixed(2)}%</p>
             </div>
             <div class="container__sum">
                 <p class="container__sum-item">3. Vương Quốc Thắng: ${ele[2]} </p>
                 <p class="container__sum-item">${((ele[2]/dem)*100).toFixed(2)}%</p>
             </div>
             <div class="container__sum">
                 <p class="container__sum-item">4. Đặng Thị Bảo Trinh: ${ele[3]} </p>
                 <p class="container__sum-item">${((ele[3]/dem)*100).toFixed(2)}%</p>
             </div>
             <div class="contaner__counter">
                <p class="container__counter-item">Bầu 1: ${a[0]}</p>
                <p class="container__counter-item">Bầu 2: ${a[1]}</p>
             </div>
             `
 
             for (i = 0; i < ele.length; i++) {
                        check = document.getElementById(`item_${i}`);
                     check.checked = false;
                }
        }

        function save(passForm) {
            
        }
    </script>
</body>
</html>